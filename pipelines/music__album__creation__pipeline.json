{
  "pipeline_name": "Music-Album-Creation-Pipeline",
  "initial_input": null,
  "start_agent": "generate_music_genre",
  "agents": [
    {
      "id": "generate_music_genre",
      "type": "llm_agent",
      "model": "phi4:latest",
      "description": "Generates a music genre.",
      "prompt_template": "Generate a random music genre.",
      "inputs": {},
      "outputs": [
        "music_genre"
      ],
      "output_format": "string"
    },
    {
      "id": "generate_song_title",
      "type": "llm_agent",
      "model": "phi4:latest",
      "description": "Generates a song title based on the music genre.",
      "prompt_template": "Generate a creative song title for the '{music_genre}' genre.",
      "inputs": {
        "music_genre": "generate_music_genre.music_genre"
      },
      "outputs": [
        "song_title"
      ],
      "output_format": "string"
    },
    {
      "id": "create_song_lyrics",
      "type": "llm_agent",
      "model": "phi4:latest",
      "description": "Creates lyrics for a song using the title and genre.",
      "prompt_template": "Write lyrics for a song titled '{song_title}' in the '{music_genre}' genre.",
      "inputs": {
        "song_title": "generate_song_title.song_title",
        "music_genre": "generate_music_genre.music_genre"
      },
      "outputs": [
        "lyrics"
      ],
      "output_format": "string"
    },
    {
      "id": "repeat_for_album",
      "type": "ConditionalRouterTool",
      "tool_name": "ConditionalRouterTool",
      "description": "Repeats the process to generate 8 songs for an album.",
      "inputs": {
        "current_count": 0,
        "total_songs": 8
      },
      "outputs": [
        "album_songs"
      ],
      "tool_config": {}
    }
  ],
  "routing": {
    "generate_music_genre": {
      "next": "generate_song_title"
    },
    "generate_song_title": {
      "next": "create_song_lyrics"
    },
    "create_song_lyrics": {
      "next": "repeat_for_album"
    },
    "repeat_for_album": {
      "next": null
    }
  },
  "final_outputs": {
    "album_songs": "repeat_for_album.album_songs"
  }
}